# 内部类

- 分类：

  1. 成员内部类
  2. 局部内部类(包含匿名内部类)

- 成员内部类定义格式

  ~~~java
  修饰符 class 外部类名称{
      // ......
      修饰符 class 内部类名称{
          // ......
      }
  }
  ~~~

  注意：内用外，随意访问；外用内，需要内部类对象

- 如何使用成员内部类？有两种方法：

  1. 间接方式： 在外部类的方法当中，使用内部类；然后main方法只是调用外部类的方法
  2. 直接方式：公式：`外部类名称.内部类名称 对象名 = new 外部类名称().new 内部类名称()`

- 如果内部类的成员变量和外部类的成员变量发生重名，那么访问外部类的成员变量的格式为：
  `外部类名称.this.外部类成员变量名`

- 如果一个类是定义在一个方法内部的，那么这个类就是一个局部内部类
  定义格式：

  ~~~java
  修饰符 class 外部类名称{
      修饰符 返回值类型 外部类方法名称(参数列表){
          class 局部内部类名称{
              // .......
          }
      }
  }
  ~~~

- 定义一个类的权限修饰符

  1. 外部类：public / (default)
  2. 成员内部类： public / protected / (default) / private
  3. 局部内部类： 什么都不能写

- 局部内部类，如果希望可以访问所在方法的局部变量，那么这个局部变量必须是有效final的
  备注：从java8开始，只要局部变量事实不变，那么final关键字可以省略
  原因：

  1. new出来的对象在堆内存当中
  2. 局部变量跟着方法走的，在堆内存当中
  3. 方法在运行结束之后，立刻出栈，局部变量就会立刻消失
  4. 但是new出来的对象会在堆当中持续存在，直到垃圾回收消失
  
- 如果接口实现类，或者是父类的子类，只需要使用唯一的一次，那么这种情况下就可以省略掉该类的定义，而改为使用匿名内部类
  匿名内部类的定义格式：

  ~~~java
  接口名称 对象名 = new 接口名称{
      // 覆盖重写所有的抽象方法
  };
  ~~~

  注意事项：

  1. 匿名内部类，在创建对象的时候，只能使用唯一一次
     如果希望多次创建对象，而且类的内容一样的话，那么久必须使用单独定义的实现类了
  2. 匿名对象，在调用方法的时候，只能调用一次
     如果希望同一个对象，调用多次方法，那么必须给对象起个名字
  3. 匿名内部类是省略了`实现类/子类名称`， 但是匿名对象是省略了`对象名称`
     强调：匿名内部类和匿名对象不是一回事